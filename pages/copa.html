<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Marcador LLF</title>
  <link rel="stylesheet" href="../css/copa.css">
</head>

<body>
  <div class="marcador">
    <div id="barra1" class="barra-equipo"></div>
    <div id="barra2" class="barra-equipo"></div>

    <div id="equipo1-abv" class="equipo-abv">EQ1</div>
    <div id="equipo2-abv" class="equipo-abv">EQ2</div>

    <div class="resultado" id="resultado">0 - 0</div>

    <div class="cronometro" id="cronometro">00:00</div>
    <div class="temporizador-extra" id="temporizador-extra">+0</div>
  </div>

  <h3>Selecciona Equipo 1</h3>
  <div class="fila-equipos" id="fila1"></div>

  <h3>Selecciona Equipo 2</h3>
  <div class="fila-equipos" id="fila2"></div>


  <div>
    <button onclick="sumar(1)">+1 EQ1</button>
    <button onclick="restar(1)">-1 EQ1</button>
    <button onclick="sumar(2)">+1 EQ2</button>
    <button onclick="restar(2)">-1 EQ2</button>
    <br>
    <button onclick="iniciar()">Iniciar</button>
    <button onclick="detener()">Detener</button>
    <button onclick="reiniciar()">Reiniciar</button>
    <br>
    <h3>Tiempo añadido</h3>
    <button onclick="anadirTiempo(1)">+1</button>
    <button onclick="anadirTiempo(2)">+2</button>
    <button onclick="anadirTiempo(3)">+3</button>
    <button onclick="anadirTiempo(4)">+4</button>
    <button onclick="anadirTiempo(5)">+5</button>
    <br>
    <a href="../marcadores.html">
      <button>Volver</button>
    </a>
  </div>

  <script>
    let marcador1 = 0, marcador2 = 0;
    let tiempo = 0, intervalo;
    let tiempoExtra = 0;

    const res = document.getElementById("resultado");
    const cron = document.getElementById("cronometro");

    const equipos = {
      "ATM": { nombre: "Atleti", abv: "ATM", color: "#e01f1a", escudo: "../imgs/escudos/atlmadrid.png" },
      "MCF": { nombre: "Málaga", abv: "MCF", color: "#3498db", escudo: "../imgs/escudos/malaga.png" },
      "BET": { nombre: "Betis", abv: "BET", color: "#03da18", escudo: "../imgs/escudos/betis.png" },
      "VIL": { nombre: "Villarreal", abv: "VIL", color: "#f1c40f", escudo: "../imgs/escudos/villarreal.png" },
      "ATH": { nombre: "Athletic", abv: "ATH", color: "#ff4040", escudo: "../imgs/escudos/athletic.png" },
      "RSO": { nombre: "R. Sociedad", abv: "RSO", color: "#005ab9", escudo: "../imgs/escudos/realsociedad.png" },
      "FCB": { nombre: "Barça", abv: "FCB", color: "#8f1515", escudo: "../imgs/escudos/barcelona.png" },
      "RMA": { nombre: "R. Madrid", abv: "RMA", color: "#ffffff", escudo: "../imgs/escudos/madrid.png" }
    };

    function actualizarMarcador() {
      res.textContent = `${marcador1} ‎ ‎ ‎ ‎ ‎ ‎ ${marcador2}`;
    }

    function sumar(equipo) {
      if (equipo === 1) marcador1++;
      else marcador2++;
      actualizarMarcador();
    }

    function restar(equipo) {
      if (equipo === 1 && marcador1 > 0) marcador1--;
      else if (equipo === 2 && marcador2 > 0) marcador2--;
      actualizarMarcador();
    }

    function actualizarTiempo() {
      let min = Math.floor(tiempo / 60);
      let seg = tiempo % 60;
      if (seg < 10) seg = "0" + seg;
      if (min < 10) min = "0" + min;
      cron.textContent = `${min}:${seg}`;
    }

    function actualizarTemporizadorExtra() {
      document.getElementById("temporizador-extra").textContent = "+" + tiempoExtra;
    }

    function iniciar() {
      if (intervalo) clearInterval(intervalo);
      intervalo = setInterval(() => {
        tiempo++;
        actualizarTiempo();
      }, 1000);
    }

    function detener() {
      clearInterval(intervalo);
    }

    function reiniciar() {
      clearInterval(intervalo);
      tiempo = 0;
      tiempoExtra = 0;
      actualizarTiempo();
      actualizarTemporizadorExtra();
      document.getElementById("temporizador-extra").style.display = "none";
      document.querySelector(".cronometro").style.left = "80%";
    }

    function anadirTiempo(min) {
      tiempoExtra += min;
      actualizarTemporizadorExtra();
      document.getElementById("temporizador-extra").style.display = "block";
      document.querySelector(".cronometro").style.left = "78%";
    }

    // Generar botones de escudos
    const fila1 = document.getElementById("fila1");
    const fila2 = document.getElementById("fila2");

    Object.keys(equipos).forEach(clave => {
      const eq = equipos[clave];

      const btn1 = document.createElement("div");
      btn1.classList.add("escudo-btn");
      btn1.style.backgroundImage = `url('${eq.escudo}')`;
      btn1.onclick = () => seleccionarEquipo(1, clave);
      fila1.appendChild(btn1);

      const btn2 = document.createElement("div");
      btn2.classList.add("escudo-btn");
      btn2.style.backgroundImage = `url('${eq.escudo}')`;
      btn2.onclick = () => seleccionarEquipo(2, clave);
      fila2.appendChild(btn2);
    });

    function seleccionarEquipo(num, clave) {
      const eq = equipos[clave];
      document.getElementById(`equipo${num}-abv`).textContent = eq.abv;
      document.getElementById(`barra${num}`).style.backgroundColor = eq.color;
    }

    actualizarMarcador();
    actualizarTiempo();
  </script>
</body>

</html>